{% extends 'navbar.html' %}

{% block headertext %}CPU Statistics{% endblock headertext %}
{% block content %}
    <dl class="dl-horizontal">
        <dt>Name</dt>
        <dd>{{ name }}</dd>
    </dl>
    <dl class="dl-horizontal">
        <dt>Cores</dt>
        <dd>{{ count }}</dd>
    </dl>
    <dl class="dl-horizontal">
        <dt>Logical cores</dt>
        <dd>{{ logical_count }}</dd>
    </dl>
    <dl class="dl-horizontal">
        <dt>Load</dt>
        <dd>{{ load }}%</dd>
    </dl>
    <dl class="dl-horizontal">
        <dt>Temperature</dt>
        <dd>{{ temperature }}%</dd>
    </dl>

    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">CPU load timeline</h3>
        </div>
        <div class="panel-body">

            <div id="chart_load_div" style="height: 500px;"></div>
        </div>
    </div>

    <!--<div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">CPU temperature timeline</h3>
        </div>
        <div class="panel-body">
            <div id="chart_temp_div" style="height: 500px;"></div>
        </div>
    </div>-->

{% endblock content %}

{% block extra_scripts %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawLoadChart);
      function drawLoadChart() {
        $.getJSON("{% url 'stats:api-cpu' %}", function(data) {
          var data = google.visualization.arrayToDataTable(data.load_stats);
          var options = {
            vAxis: {
              minValue: 0,
              maxValue: 100,
              format:'# \'%\''
            }
          };
          var chart = new google.visualization.AreaChart(document.getElementById('chart_load_div'));
          chart.draw(data, options);
        });
      }
      setInterval(drawLoadChart, {{ stats_interval }});
    </script>
{% endblock extra_scripts %}
